import{_ as ze,e as Ze,a as es,b as ss,c as ts,d as as}from"./DialogTitle.vue_vue_type_script_setup_true_lang-vRp7RmEY.js";import{a as os,_ as ns}from"./BaseSearch.vue_vue_type_script_setup_true_lang-NAs5f1KZ.js";import{_ as rs}from"./Input.vue_vue_type_script_setup_true_lang-qw3V9xbo.js";import{c as T,N as ls,o as a,j as c,r as Q,d as N,t as Ue,v as re,z as f,y as Me,a8 as j,a6 as je,u as e,D as s,F as C,E as te,f as t,k as R,C as d,a9 as me,a as $,w as n,I as h,B as g,J as le,H as G,aa as cs,K as ce,L as Ne,R as qe,O as is,P as us,ab as ds,ac as ps,h as _e,m as ie,ad as ms,ae as _s,af as fs,ag as hs,ah as vs,x as pe,a3 as ys,ai as ws,aj as gs,G as Se,ak as bs,al as Ve,am as xs,an as ks,ao as Cs,ap as F,aq as Fe,_ as $s}from"./index-zZq7Hbs8.js";import{_ as Is}from"./ScrollArea.vue_vue_type_script_setup_true_lang-t9-ICoP6.js";/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=T("CheckCircle2Icon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=T("ForwardIcon",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=T("HelpCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=T("MessageCircleOffIcon",[["path",{d:"M20.5 14.9A9 9 0 0 0 9.1 3.5",key:"1iebmn"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.6 5.6C3 8.3 2.2 12.5 4 16l-2 6 6-2c3.4 1.8 7.6 1.1 10.3-1.7",key:"1ov8ce"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=T("MoreVerticalIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=T("ReplyIcon",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=T("StarIcon",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=T("XCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),As={},zs={class:"text-highlight italic"};function Us(y,r){return a(),c("span",zs,[Q(y.$slots,"default")])}const Ee=ls(As,[["render",Us]]),js={class:"py-3"},Ns=s("p",{class:"text-sm text-center text-muted-foreground"}," this channel is closed ",-1),qs={key:0},Es={class:"border px-4 py-3 rounded-md mt-6 space-y-3 w-4/5 mx-auto"},Os={class:"flex items-center gap-3 min-h-10"},Ps={class:"flex items-center gap-1"},Hs={class:"text-muted-foreground"},Ys={key:0,class:"bg-secondary p-3 rounded-md space-y-1"},Ts={class:"text-muted-foreground"},Js={key:0,class:"border px-4 py-3 rounded-md w-4/5 mx-auto mt-3"},Ls={key:0,class:"text-destructive"},Xs={class:"flex items-center gap-3"},Ks={class:"flex items-center gap-1"},Gs=["onClick"],Qs={class:"mt-1"},Ws={class:"w-1/2 space-y-3"},Zs={key:0,class:"text-destructive"},et={key:1,class:"text-destructive"},st=N({__name:"ChatReview",props:{escrowId:{}},async setup(y){let r,m;const b=y,A=Ue(),B=([r,m]=re(()=>A.getReviewFactory()),r=await r,m(),r),w=f(),I=f(0),l=f(""),v=f(!1),k=f(!1);Me(l,u=>{u.length>=5&&(k.value=!1)});async function J(){if(v.value=!1,k.value=!1,I.value<1||I.value>5){v.value=!0;return}if(l.value.length<5){k.value=!0;return}const _=await(await B.createReview(b.escrowId,I.value,l.value)).wait();(_==null?void 0:_.status)===1&&await V()}const M=f(),S=f(""),L=f(!1),se=f(!1);Me(S,u=>{u.length>=5&&(L.value=!1)});async function ue(){if(!w.value)return;if(L.value=!1,S.value.length<5){L.value=!0;return}const _=await(await B.createResponse(w.value.id,S.value)).wait();(_==null?void 0:_.status)===1&&await V()}function q(u){I.value=u,v.value=!1}const ae=f(j),W=f(j);async function V(){try{const u=await B.getReviewByEscrowId(b.escrowId);if(u[2]===j||u[3]===j)return;w.value={timestamp:Number(u[0]),rating:Number(u[1]),reviewingAddress:u[2],beingReviewedAddress:u[3],reviewComment:u[4],relevantEscrowId:Number(u[5]),responded:u[6],id:Number(u[7])},ae.value=(await ce(w.value.reviewingAddress)).userName,W.value=(await ce(w.value.beingReviewedAddress)).userName;const _=await B.getResponse(w.value.id);if(_[1]===j)return;M.value={timestamp:Number(_[0]),responder:_[1],responseComment:_[2]}}catch{}}return je(V),(u,_)=>{const z=Ne,E=Ee,U=ze;return a(),c("div",js,[Ns,e(w)?(a(),c("div",qs,[s("div",Es,[s("div",Os,[s("ul",Ps,[(a(),c(C,null,te(5,x=>s("li",{key:x},[t(e(Ae),{class:R({"fill-primary":x<=e(w).rating}),"stroke-width":"1.25"},null,8,["class"])])),64))]),s("p",Hs,d(("useDateFormat"in u?u.useDateFormat:e(me))(e(w).timestamp,"HH:mm DD.MM.YYYY").value),1),e(W)===e(A).user.userName&&!e(M)?(a(),$(z,{key:0,size:"icon",class:"ml-auto",variant:"ghost",onClick:_[0]||(_[0]=x=>se.value=!e(se))},{default:n(()=>[t(e(Vs))]),_:1})):h("",!0)]),s("p",null,[t(E,null,{default:n(()=>[g(d(e(ae))+": ",1)]),_:1}),g(" "+d(e(w).reviewComment),1)]),e(M)?(a(),c("div",Ys,[s("p",Ts,d(("useDateFormat"in u?u.useDateFormat:e(me))(e(M).timestamp,"HH:mm DD.MM.YYYY").value),1),s("p",null,[t(E,null,{default:n(()=>[g(d(e(W))+": ",1)]),_:1}),g(" "+d(e(M).responseComment),1)])])):h("",!0)]),t(cs,{"enter-active-class":"transition-all","leave-active-class":"transition-all","enter-from-class":"translate-y-[-30px] opacity-0","leave-to-class":"translate-y-[-30px] opacity-0"},{default:n(()=>[e(se)?(a(),c("div",Js,[s("form",{class:"space-y-3",onSubmit:le(ue,["prevent"])},[t(U,{modelValue:e(S),"onUpdate:modelValue":_[1]||(_[1]=x=>G(S)?S.value=x:null),class:R({"border-destructive focus-visible:ring-destructive":e(L)}),placeholder:"your respond..."},null,8,["modelValue","class"]),e(L)?(a(),c("p",Ls," response must have at least 5 characters ")):h("",!0),t(z,{class:"w-full mt-3"},{default:n(()=>[g(" response ")]),_:1})],32)])):h("",!0)]),_:1})])):(a(),c("form",{key:1,class:"flex flex-col items-center justify-center gap-3 mt-6",onSubmit:le(J,["prevent"])},[s("div",Xs,[s("ul",Ks,[(a(),c(C,null,te(5,x=>s("li",{key:x,class:"cursor-pointer",onClick:fe=>q(x)},[t(e(Ae),{class:R({"fill-primary":x<=e(I),"text-destructive":e(v)}),"stroke-width":"1.25"},null,8,["class"])],8,Gs)),64))]),s("span",Qs,d(e(I))+" / 5",1)]),s("div",Ws,[t(U,{modelValue:e(l),"onUpdate:modelValue":_[2]||(_[2]=x=>G(l)?l.value=x:null),class:R({"border-destructive focus-visible:ring-destructive":e(k)}),placeholder:"your review..."},null,8,["modelValue","class"]),e(v)?(a(),c("p",Zs," rating must be from 1 to 5 stars ")):h("",!0),e(k)?(a(),c("p",et," comment must have at least 5 characters ")):h("",!0),t(z,{type:"submit",class:"w-full"},{default:n(()=>[g(" submit ")]),_:1})])],32))])}}}),tt={class:"rounded-md bg-secondary w-fit relative"},at=N({__name:"ChatBox",props:{dir:{default:"left"},parentClass:{}},setup(y){return(r,m)=>(a(),c("div",{class:R(["flex",{"justify-end":r.dir==="right"}])},[s("div",{class:R(["w-2/3",{"flex justify-end":r.dir==="right"}])},[s("div",tt,[s("div",{class:R(r.parentClass??"px-3 py-1 tracking-wide min-w-[100px]")},[Q(r.$slots,"default")],2),Q(r.$slots,"timestamp")])],2)],2))}}),ot=N({__name:"DropdownMenu",props:{open:{type:Boolean},defaultOpen:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(y,{emit:r}){const A=qe(y,r);return(B,w)=>(a(),$(e(ds),is(us(e(A))),{default:n(()=>[Q(B.$slots,"default")]),_:3},16))}}),nt=N({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","entryFocus","openAutoFocus","closeAutoFocus"],setup(y,{emit:r}){const m=y,A=qe(m,r);return(B,w)=>(a(),$(e(ms),null,{default:n(()=>[t(e(ps),ie({class:[e(_e)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",m.class)]},e(A)),{default:n(()=>[Q(B.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),rt=N({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(y){const r=y;return(m,b)=>(a(),$(e(_s),ie(r,{class:"-mx-1 my-1 h-px bg-muted"}),null,16))}}),lt=N({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},inset:{type:Boolean},class:{}},setup(y){const r=y;return(m,b)=>(a(),$(e(fs),ie(r,{class:[e(_e)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",m.inset&&"pl-8",r.class)]}),{default:n(()=>[Q(m.$slots,"default")]),_:3},16,["class"]))}}),ct=N({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(y){const r=y;return(m,b)=>(a(),$(e(hs),ie({class:"outline-none"},r),{default:n(()=>[Q(m.$slots,"default")]),_:3},16))}}),it=N({__name:"Separator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(y){const r=y;return(m,b)=>(a(),$(e(vs),{class:R([e(_e)("shrink-0 bg-secondary",r.class),r.orientation==="vertical"?"w-px h-full":"h-px w-full"])},null,8,["class"]))}}),ut={class:"py-10"},dt={class:"grid grid-cols-3 gap-5"},pt={key:1,class:"relative my-6"},mt=s("span",{class:"absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 px-3 bg-background"}," to you ",-1),_t={key:0,class:"space-y-3"},ft=["onClick"],ht={class:"space-y-1"},vt={class:"flex items-center justify-between w-"},yt={class:"font-medium"},wt={class:"font-normal mr-1"},gt={class:"space-x-1"},bt={class:"text-muted-foreground"},xt={key:1,class:"relative my-6"},kt=s("span",{class:"absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 px-3 bg-background"},"from you",-1),Ct={key:2,class:"space-y-3"},$t=["onClick"],It={class:"space-y-1"},Dt={class:"flex items-center justify-between w-"},Rt={class:"font-medium"},Bt={class:"font-normal mr-1"},Mt={class:"space-x-1"},St={class:"text-muted-foreground"},Vt={key:3,class:"pt-6 text-center"},Ft=s("p",{class:"text-muted-foreground"}," there is no chat ",-1),At=[Ft],zt={class:"col-span-2 flex flex-col border rounded-md"},Ut={class:"border-b flex items-center gap-3 p-3"},jt={class:"space-x-2"},Nt={class:"font-medium"},qt={class:"text-muted-foreground"},Et={class:"space-x-2"},Ot={class:"font-medium"},Pt={class:"text-muted-foreground"},Ht={class:"ml-auto"},Yt={class:"gap-2 flex items-center"},Tt=s("span",{class:"text-base"},"accept",-1),Jt={class:"gap-2 flex items-center"},Lt=s("span",{class:"text-base"},"decline",-1),Xt={class:"gap-2 flex items-center"},Kt=s("span",{class:"text-base"},"committee",-1),Gt={key:0,class:"h-full flex-center"},Qt={class:"flex flex-col gap-2 h-full"},Wt={key:0,class:"text-sm text-center text-muted-foreground"},Zt={class:"text-sm text-muted-foreground text-end pr-3 py-1"},ea={key:3,class:"text-sm text-center text-muted-foreground"},sa={class:"mt-auto p-3"},ta={class:"grow"},aa=s("span",null,"amount",-1),oa={key:0,class:"text-destructive"},ua=N({__name:"chats",async setup(y){let r,m;const b=Ue(),A=([r,m]=re(()=>b.getEscrowFactory()),r=await r,m(),r),B=([r,m]=re(()=>b.getChatFactory()),r=await r,m(),r),w=pe([]),I=pe([]),l=f(),v=f(),k=ys(()=>{var p,o;return!w.value.length&&!I.value.length||((p=l.value)==null?void 0:p.buyer)===j||((o=l.value)==null?void 0:o.seller)===j}),J=pe([]),M=f("buyer"),S=f(""),L=ks(),se=Cs();async function ue(){const p=[],o=[];for(const X of b.user.escrowIds){const D=await ws(X);if(!D)return;const P=await ce(D.buyer),H=await ce(D.seller),Z=await gs(D.jobId),oe={...D,buyerUsername:P.userName,sellerUsername:H.userName,job:Z};Se(P.owner,b.address)?p.push(oe):o.push(oe)}w.value=p,I.value=o;const O=se.query.id;if(O){const X=Number.parseInt(O.toString()),D=p.find(H=>H.escrowId===X);if(D){await q(D);return}const P=o.find(H=>H.escrowId===X);if(P){await q(P);return}}p.length?await q(p[0]):o.length&&await q(o[0])}je(ue);async function q(p){var o;((o=l.value)==null?void 0:o.escrowId)!==p.escrowId&&(J.value=[],L.push(`/chats?id=${p.escrowId}`),M.value=p.buyerUsername===b.user.userName?"buyer":"seller",l.value=p,v.value=await bs(p.escrowId),J.value=await Ve(p.escrowId))}async function ae(){if(!l.value)return;const o=await(await A.sendRequest(l.value.escrowId,{value:l.value.price})).wait();if((o==null?void 0:o.status)===1){if(!v.value)return;v.value.status=F.Pending}}async function W(p){if(!l.value)return;const O=await(await A.respondToRequest(l.value.escrowId,p)).wait();if((O==null?void 0:O.status)===1){if(!v.value)return;v.value.status=p?F.Accepted:F.Declined}}const V=f("");async function u(){if(!l.value||!V.value)return;const o=await(await B.sendMessage(l.value.escrowId,V.value)).wait();(o==null?void 0:o.status)===1&&(J.value=await Ve(l.value.escrowId),V.value="")}const _=([r,m]=re(()=>b.getCommitteeFactory()),r=await r,m(),r),z=f(!1),E=f(0),U=f(""),x=f(!1);function fe(){l.value&&(z.value=!0,E.value=l.value.price)}async function Oe(){if(!l.value)return;if(x.value=!1,U.value.length<5){x.value=!0;return}const o=await(await _.openCommitteeReview(l.value.escrowId,E.value,U.value)).wait();(o==null?void 0:o.status)===1&&(z.value=!1,U.value="")}return(p,o)=>{var we,ge,be,xe,ke,Ce,$e,Ie,De;const O=os,X=it,D=$s,P=Is,H=xs,Z=Ne,oe=ct,de=lt,he=rt,Pe=nt,He=ot,ve=Ee,ee=at,Ye=st,ye=rs,Te=es,Je=ss,Le=ts,Xe=ns,Ke=ze,Ge=as,Qe=Ze;return a(),c(C,null,[s("div",ut,[s("div",dt,[s("div",{class:R(["col-span-1",e(k)?"border rounded-md":"border-none"])},[e(k)?h("",!0):(a(),$(O,{key:0,modelValue:e(S),"onUpdate:modelValue":o[0]||(o[0]=i=>G(S)?S.value=i:null),placeholder:"search for chats"},null,8,["modelValue"])),e(k)?h("",!0):(a(),c("div",pt,[t(X),mt])),t(P,{class:"h-[600px]"},{default:n(()=>[e(w).length?(a(),c("ul",_t,[(a(!0),c(C,null,te(e(w),i=>{var Y;return a(),c("li",{key:i.escrowId,class:"cursor-pointer",onClick:ne=>q(i)},[s("div",{class:R(["border rounded-md px-4 py-3 hover:border-primary transition-colors",{"border-primary":i.escrowId===((Y=e(l))==null?void 0:Y.escrowId)}])},[s("div",ht,[s("div",vt,[s("p",yt," #"+d(i.jobId)+" "+d(i.job.title),1),t(D,null,{parent:n(()=>[s("span",wt,d(i.job.price),1)]),_:2},1024)]),s("div",gt,[s("span",null,d(i.sellerUsername),1),s("span",bt,d(e(Fe)(i.seller)),1)])])],2)],8,ft)}),128))])):h("",!0),e(k)?h("",!0):(a(),c("div",xt,[t(X),kt])),e(I).length?(a(),c("ul",Ct,[(a(!0),c(C,null,te(e(I),i=>{var Y;return a(),c("li",{key:i.escrowId,class:"cursor-pointer",onClick:ne=>q(i)},[s("div",{class:R(["border rounded-md px-4 py-3 hover:border-primary transition-colors",{"border-primary":i.escrowId===((Y=e(l))==null?void 0:Y.escrowId)}])},[s("div",It,[s("div",Dt,[s("p",Rt," #"+d(i.jobId)+" "+d(i.job.title),1),t(D,null,{parent:n(()=>[s("span",Bt,d(i.job.price),1)]),_:2},1024)]),s("div",Mt,[s("span",null,d(i.buyerUsername),1),s("span",St,d(e(Fe)(i.buyer)),1)])])],2)],8,$t)}),128))])):h("",!0),e(k)?(a(),c("div",Vt,At)):h("",!0)]),_:1})],2),s("div",zt,[s("div",Ut,[e(M)==="buyer"?(a(),c(C,{key:0},[t(H,{address:(we=e(l))==null?void 0:we.seller,size:35},null,8,["address"]),s("div",jt,[s("span",Nt,d(((ge=e(l))==null?void 0:ge.sellerUsername)??"n.a."),1),s("span",qt,d(((be=e(l))==null?void 0:be.seller)??e(j)),1)])],64)):(a(),c(C,{key:1},[t(H,{address:(xe=e(l))==null?void 0:xe.buyer,size:35},null,8,["address"]),s("div",Et,[s("span",Ot,d(((ke=e(l))==null?void 0:ke.buyerUsername)??"n.a."),1),s("span",Pt,d(((Ce=e(l))==null?void 0:Ce.buyer)??e(j)),1)])],64)),s("div",Ht,[(($e=e(v))==null?void 0:$e.status)===e(F).Pending?(a(),$(He,{key:0},{default:n(()=>[t(oe,null,{default:n(()=>[t(Z,{variant:"outline",size:"icon",class:"h-8 w-8"},{default:n(()=>[t(e(Ss),{size:20})]),_:1})]),_:1}),t(Pe,{align:"end"},{default:n(()=>[e(M)==="seller"?(a(),c(C,{key:0},[t(de,{class:"text-highlight pr-4",onClick:o[1]||(o[1]=i=>W(!0))},{default:n(()=>[s("div",Yt,[t(e(Ds),{size:24}),Tt])]),_:1}),t(he),t(de,{class:"text-destructive pr-4",onClick:o[2]||(o[2]=i=>W(!1))},{default:n(()=>[s("div",Jt,[t(e(Fs),{size:24}),Lt])]),_:1}),t(he)],64)):h("",!0),t(de,{class:"text-orange-500 dark:text-orange-400 pr-4",onClick:fe},{default:n(()=>[s("div",Xt,[t(e(Bs),{size:24}),Kt])]),_:1})]),_:1})]),_:1})):h("",!0)])]),e(k)?(a(),c("div",Gt,[t(e(Ms),{size:100,"stroke-width":"0.75",class:"text-muted-foreground"})])):(a(),$(P,{key:1,class:"grow p-3"},{default:n(()=>{var i,Y,ne,Re;return[s("div",Qt,[((i=e(v))==null?void 0:i.status)===e(F).Pending&&e(J).length===0?(a(),c("p",Wt," you both are now connected ")):h("",!0),((Y=e(v))==null?void 0:Y.status)===e(F).Start?(a(),c(C,{key:1},[e(M)==="buyer"?(a(),c(C,{key:0},[t(ee,null,{default:n(()=>[t(ve,null,{default:n(()=>{var K;return[g(d(((K=e(l))==null?void 0:K.sellerUsername)??"n.a."),1)]}),_:1}),g(" hat accepted your job buy request! ")]),_:1}),t(ee,null,{default:n(()=>[g(" click this button to connect with them. ")]),_:1}),t(ee,{"parent-class":""},{default:n(()=>[t(Z,{size:"sm",onClick:ae},{default:n(()=>[g(" connect ")]),_:1})]),_:1})],64)):(a(),c(C,{key:1},[t(ee,{dir:"right"},{default:n(()=>[g(" you hat already sent job request to "),t(ve,null,{default:n(()=>{var K;return[g(d(((K=e(l))==null?void 0:K.buyerUsername)??"n.a."),1)]}),_:1}),g(". ")]),_:1}),t(ee,{dir:"right"},{default:n(()=>[g(" wait for them to accept! ")]),_:1})],64))],64)):h("",!0),(a(!0),c(C,null,te(e(J),({sender:K,timestamp:Be,content:We})=>(a(),$(ee,{key:Be,dir:e(Se)(K,e(b).address)?"right":"left"},{timestamp:n(()=>[s("p",Zt,d(("useDateFormat"in p?p.useDateFormat:e(me))(Be,"HH:mm DD.MM.YY").value),1)]),default:n(()=>[g(d(We)+" ",1)]),_:2},1032,["dir"]))),128)),((ne=e(v))==null?void 0:ne.status)===e(F).Accepted&&e(l)?(a(),$(Ye,{key:2,"escrow-id":e(l).escrowId},null,8,["escrow-id"])):h("",!0),((Re=e(v))==null?void 0:Re.status)===e(F).Declined?(a(),c("p",ea," escrow has been canceled. ")):h("",!0)])]}),_:1})),s("div",sa,[s("form",{class:"flex items-center gap-3",onSubmit:le(u,["prevent"])},[s("div",ta,[t(ye,{modelValue:e(V),"onUpdate:modelValue":o[3]||(o[3]=i=>G(V)?V.value=i:null),placeholder:"type something here..."},null,8,["modelValue"])]),t(Z,{size:"icon",disabled:e(k)||((Ie=e(v))==null?void 0:Ie.status)===e(F).Accepted||((De=e(v))==null?void 0:De.status)===e(F).Declined},{default:n(()=>[t(e(Rs),{size:20})]),_:1},8,["disabled"])],32)])])])]),t(Qe,{open:e(z),"onUpdate:open":o[6]||(o[6]=i=>G(z)?z.value=i:null)},{default:n(()=>[t(Ge,{class:"sm:max-w-[425px]"},{default:n(()=>[t(Le,null,{default:n(()=>[t(Te,null,{default:n(()=>[g("request committee")]),_:1}),t(Je)]),_:1}),s("form",{class:"space-y-3",onSubmit:le(Oe,["prevent"])},[t(Xe,{class:"flex items-center gap-3"},{default:n(()=>[aa,t(ye,{modelValue:e(E),"onUpdate:modelValue":o[4]||(o[4]=i=>G(E)?E.value=i:null),min:"0",type:"number"},null,8,["modelValue"])]),_:1}),t(Ke,{modelValue:e(U),"onUpdate:modelValue":o[5]||(o[5]=i=>G(U)?U.value=i:null),placeholder:"reason why you want to open a committee"},null,8,["modelValue"]),e(x)?(a(),c("p",oa," reason should have more than 5 characters ")):h("",!0),t(Z,{class:"w-full",type:"submit"},{default:n(()=>[g(" request ")]),_:1})],32)]),_:1})]),_:1},8,["open"])],64)}}});export{ua as default};
