import{_ as Ne,e as ns,a as rs,b as ls,c as cs,d as is}from"./DialogTitle.vue_vue_type_script_setup_true_lang-HyXkPWuG.js";import{a as us,_ as ds}from"./BaseSearch.vue_vue_type_script_setup_true_lang-UVkTOByq.js";import{_ as ps}from"./Input.vue_vue_type_script_setup_true_lang-P6Oz0Yo4.js";import{c as J,N as ms,o as a,j as l,r as oe,d as L,t as Te,v as ue,z as h,y as ze,aa as U,a8 as He,u as e,D as s,F as D,E as ae,f as t,k as Y,C as p,ab as ve,a as R,w as o,I as f,B as v,J as de,H as ee,ac as _s,K as pe,L as Oe,T as Pe,P as fs,Q as hs,ad as ys,ae as vs,h as we,m as me,af as ws,ag as gs,ah as bs,ai as xs,aj as ks,ak as Cs,x as ce,a5 as $s,al as Is,am as Ds,G as ie,an as Rs,ao as Ue,ap as Ve,aq as Ms,ar as Bs,as as Ss,O as ye,at as Ee,au as z,S as As,_ as qs}from"./index-CyuONOMt.js";import{_ as Fs}from"./ChatBox.vue_vue_type_script_setup_true_lang-y97E8ncU.js";import{_ as zs}from"./ScrollArea.vue_vue_type_script_setup_true_lang-AV5mUAo5.js";/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=J("CheckCircle2Icon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=J("ForwardIcon",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=J("HelpCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=J("MessageCircleOffIcon",[["path",{d:"M20.5 14.9A9 9 0 0 0 9.1 3.5",key:"1iebmn"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.6 5.6C3 8.3 2.2 12.5 4 16l-2 6 6-2c3.4 1.8 7.6 1.1 10.3-1.7",key:"1ov8ce"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=J("MoreVerticalIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=J("ReplyIcon",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=J("StarIcon",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=J("XCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Os={},Ps={class:"text-highlight italic"};function Ys(b,c){return a(),l("span",Ps,[oe(b.$slots,"default")])}const Ye=ms(Os,[["render",Ys]]),Js={class:"py-3"},Ls=s("p",{class:"text-sm text-center text-muted-foreground"}," this channel is closed ",-1),Xs={key:0},Ks={class:"border px-4 py-3 rounded-md mt-6 space-y-3 w-4/5 mx-auto"},Qs={class:"flex items-center gap-3 min-h-10"},Ws={class:"flex items-center gap-1"},Gs={class:"text-muted-foreground"},Zs={key:0,class:"bg-secondary p-3 rounded-md space-y-1"},et={class:"text-muted-foreground"},st={key:0,class:"border px-4 py-3 rounded-md w-4/5 mx-auto mt-3"},tt={key:0,class:"text-destructive"},at={class:"flex items-center gap-3"},ot={class:"flex items-center gap-1"},nt=["onClick"],rt={class:"mt-1"},lt={class:"w-1/2 space-y-3"},ct={key:0,class:"text-destructive"},it={key:1,class:"text-destructive"},ut=L({__name:"ChatReview",props:{escrowId:{}},async setup(b){let c,_;const B=b,j=Te(),w=([c,_]=ue(()=>j.getReviewFactory()),c=await c,_(),c),x=h(),N=h(0),S=h(""),T=h(!1),A=h(!1);ze(S,d=>{d.length>=5&&(A.value=!1)});async function W(){if(T.value=!1,A.value=!1,N.value<1||N.value>5){T.value=!0;return}if(S.value.length<5){A.value=!0;return}const m=await(await w.createReview(B.escrowId,N.value,S.value)).wait();(m==null?void 0:m.status)===1&&await M()}const n=h(),y=h(""),C=h(!1),V=h(!1);ze(y,d=>{d.length>=5&&(C.value=!1)});async function G(){if(!x.value)return;if(C.value=!1,y.value.length<5){C.value=!0;return}const m=await(await w.createResponse(x.value.id,y.value)).wait();(m==null?void 0:m.status)===1&&await M()}function se(d){N.value=d,T.value=!1}const X=h(U),te=h(U);async function M(){try{const d=await w.getReviewByEscrowId(B.escrowId);if(d[2]===U||d[3]===U)return;x.value={timestamp:Number(d[0]),rating:Number(d[1]),reviewingAddress:d[2],beingReviewedAddress:d[3],reviewComment:d[4],relevantEscrowId:Number(d[5]),responded:d[6],id:Number(d[7])},X.value=(await pe(x.value.reviewingAddress)).userName,te.value=(await pe(x.value.beingReviewedAddress)).userName;const m=await w.getResponse(x.value.id);if(m[1]===U)return;n.value={timestamp:Number(m[0]),responder:m[1],responseComment:m[2]}}catch{}}return He(M),(d,m)=>{const K=Oe,ne=Ye,H=Ne;return a(),l("div",Js,[Ls,e(x)?(a(),l("div",Xs,[s("div",Ks,[s("div",Qs,[s("ul",Ws,[(a(),l(D,null,ae(5,g=>s("li",{key:g},[t(e(je),{class:Y({"fill-primary":g<=e(x).rating}),"stroke-width":"1.25"},null,8,["class"])])),64))]),s("p",Gs,p(("useDateFormat"in d?d.useDateFormat:e(ve))(e(x).timestamp,"HH:mm DD.MM.YYYY").value),1),e(te)===e(j).user.userName&&!e(n)?(a(),R(K,{key:0,size:"icon",class:"ml-auto",variant:"ghost",onClick:m[0]||(m[0]=g=>V.value=!e(V))},{default:o(()=>[t(e(Ts))]),_:1})):f("",!0)]),s("p",null,[t(ne,null,{default:o(()=>[v(p(e(X))+": ",1)]),_:1}),v(" "+p(e(x).reviewComment),1)]),e(n)?(a(),l("div",Zs,[s("p",et,p(("useDateFormat"in d?d.useDateFormat:e(ve))(e(n).timestamp,"HH:mm DD.MM.YYYY").value),1),s("p",null,[t(ne,null,{default:o(()=>[v(p(e(te))+": ",1)]),_:1}),v(" "+p(e(n).responseComment),1)])])):f("",!0)]),t(_s,{"enter-active-class":"transition-all","leave-active-class":"transition-all","enter-from-class":"translate-y-[-30px] opacity-0","leave-to-class":"translate-y-[-30px] opacity-0"},{default:o(()=>[e(V)?(a(),l("div",st,[s("form",{class:"space-y-3",onSubmit:de(G,["prevent"])},[t(H,{modelValue:e(y),"onUpdate:modelValue":m[1]||(m[1]=g=>ee(y)?y.value=g:null),class:Y({"border-destructive focus-visible:ring-destructive":e(C)}),placeholder:"your respond..."},null,8,["modelValue","class"]),e(C)?(a(),l("p",tt," response must have at least 5 characters ")):f("",!0),t(K,{class:"w-full mt-3"},{default:o(()=>[v(" response ")]),_:1})],32)])):f("",!0)]),_:1})])):(a(),l("form",{key:1,class:"flex flex-col items-center justify-center gap-3 mt-6",onSubmit:de(W,["prevent"])},[s("div",at,[s("ul",ot,[(a(),l(D,null,ae(5,g=>s("li",{key:g,class:"cursor-pointer",onClick:Q=>se(g)},[t(e(je),{class:Y({"fill-primary":g<=e(N),"text-destructive":e(T)}),"stroke-width":"1.25"},null,8,["class"])],8,nt)),64))]),s("span",rt,p(e(N))+" / 5",1)]),s("div",lt,[t(H,{modelValue:e(S),"onUpdate:modelValue":m[2]||(m[2]=g=>ee(S)?S.value=g:null),class:Y({"border-destructive focus-visible:ring-destructive":e(A)}),placeholder:"your review..."},null,8,["modelValue","class"]),e(T)?(a(),l("p",ct," rating must be from 1 to 5 stars ")):f("",!0),e(A)?(a(),l("p",it," comment must have at least 5 characters ")):f("",!0),t(K,{type:"submit",class:"w-full"},{default:o(()=>[v(" submit ")]),_:1})])],32))])}}}),dt=L({__name:"DropdownMenu",props:{open:{type:Boolean},defaultOpen:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(b,{emit:c}){const j=Pe(b,c);return(w,x)=>(a(),R(e(ys),fs(hs(e(j))),{default:o(()=>[oe(w.$slots,"default")]),_:3},16))}}),pt=L({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","entryFocus","openAutoFocus","closeAutoFocus"],setup(b,{emit:c}){const _=b,j=Pe(_,c);return(w,x)=>(a(),R(e(ws),null,{default:o(()=>[t(e(vs),me({class:[e(we)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_.class)]},e(j)),{default:o(()=>[oe(w.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),mt=L({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(b){const c=b;return(_,B)=>(a(),R(e(gs),me(c,{class:"-mx-1 my-1 h-px bg-muted"}),null,16))}}),_t=L({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},inset:{type:Boolean},class:{}},setup(b){const c=b;return(_,B)=>(a(),R(e(bs),me(c,{class:[e(we)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_.inset&&"pl-8",c.class)]}),{default:o(()=>[oe(_.$slots,"default")]),_:3},16,["class"]))}}),ft=L({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(b){const c=b;return(_,B)=>(a(),R(e(xs),me({class:"outline-none"},c),{default:o(()=>[oe(_.$slots,"default")]),_:3},16))}}),ht=L({__name:"Separator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(b){const c=b;return(_,B)=>(a(),R(e(ks),{class:Y([e(we)("shrink-0 bg-secondary",c.class),c.orientation==="vertical"?"w-px h-full":"h-px w-full"])},null,8,["class"]))}}),yt={class:"py-10"},vt={class:"grid grid-cols-3 gap-5"},wt={key:1,class:"relative my-6"},gt=s("span",{class:"absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 px-3 bg-background"}," to you ",-1),bt={key:0,class:"space-y-3"},xt=["onClick"],kt={class:"space-y-1"},Ct={class:"flex items-center justify-between w-"},$t={class:"font-medium"},It={class:"font-normal mr-1"},Dt={class:"space-x-1"},Rt={class:"text-muted-foreground"},Mt={key:1,class:"relative my-6"},Bt=s("span",{class:"absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 px-3 bg-background"},"from you",-1),St={key:2,class:"space-y-3"},At=["onClick"],qt={class:"space-y-1"},Ft={class:"flex items-center justify-between w-"},zt={class:"font-medium"},Ut={class:"font-normal mr-1"},Vt={class:"space-x-1"},Et={class:"text-muted-foreground"},jt={key:3,class:"pt-6 text-center"},Nt=s("p",{class:"text-muted-foreground"}," there is no chat ",-1),Tt=[Nt],Ht={class:"col-span-2 flex flex-col border rounded-md"},Ot={class:"border-b flex items-center gap-3 p-3"},Pt={class:"space-x-2"},Yt={class:"font-medium"},Jt={class:"text-muted-foreground"},Lt={class:"space-x-2"},Xt={class:"font-medium"},Kt={class:"text-muted-foreground"},Qt={class:"ml-auto"},Wt={class:"gap-2 flex items-center"},Gt=s("span",{class:"text-base"},"accept",-1),Zt={class:"gap-2 flex items-center"},ea=s("span",{class:"text-base"},"decline",-1),sa={class:"gap-2 flex items-center"},ta=s("span",{class:"text-base"},"committee",-1),aa={key:0,class:"h-full flex-center"},oa={class:"flex flex-col gap-2 h-full"},na={key:0,class:"text-sm text-center text-muted-foreground"},ra={class:"text-sm text-muted-foreground text-end pr-3 py-1"},la={key:3,class:"text-sm text-center text-muted-foreground"},ca={key:4,class:"text-sm text-center text-muted-foreground"},ia={class:"mt-auto p-3"},ua={class:"grow"},da=s("span",null,"amount",-1),pa={key:0,class:"text-destructive"},wa=L({__name:"chats",async setup(b){let c,_;const B=Bs(),j=Ss(),w=Te(),x=([c,_]=ue(()=>w.getEscrowFactory()),c=await c,_(),c),N=([c,_]=ue(()=>w.getChatFactory()),c=await c,_(),c),S=([c,_]=ue(()=>w.getCommitteeFactory()),c=await c,_(),c),{toast:T}=Cs(),A=ce([]),W=ce([]),n=h(),y=h(),C=$s(()=>{var i,r;return!A.value.length&&!W.value.length||((i=n.value)==null?void 0:i.buyer)===U||((r=n.value)==null?void 0:r.seller)===U}),V=ce([]),G=h("buyer"),se=h(""),X=ce();async function te(){const i=[],r=[];for(const q of w.user.escrowIds){const k=await Is(q);if(!k)return;const E=await pe(k.buyer),I=await pe(k.seller),O=await Ds(k.jobId),re={...k,buyerUsername:E.userName,sellerUsername:I.userName,job:O};ie(E.owner,w.address)?i.push(re):r.push(re)}A.value=i,W.value=r;const $=j.query.id;if($){const q=Number.parseInt($.toString()),k=i.find(I=>I.escrowId===q);if(k){await M(k);return}const E=r.find(I=>I.escrowId===q);if(E){await M(E);return}}i.length?await M(i[0]):r.length&&await M(r[0])}He(te);async function M(i){var $;if((($=n.value)==null?void 0:$.escrowId)===i.escrowId)return;V.value=[],B.push(`/chats?id=${i.escrowId}`),G.value=i.buyerUsername===w.user.userName?"buyer":"seller",n.value=i,y.value=await Rs(i.escrowId),V.value=await Ue(i.escrowId);const r=await Ve(i.escrowId);X.value={...r,username:ie(i.buyer,r.requester)?i.buyerUsername:i.sellerUsername}}async function d(){if(!n.value)return;const r=await(await x.sendRequest(n.value.escrowId,{value:BigInt(n.value.price)})).wait();if((r==null?void 0:r.status)===1){if(!y.value)return;y.value.status=z.Pending}}async function m(i){if(!n.value)return;const $=await(await x.respondToRequest(n.value.escrowId,i)).wait();if(($==null?void 0:$.status)===1){if(!y.value)return;y.value.status=i?z.Accepted:z.Declined}}const K=h("");async function ne(){if(!n.value||!K.value)return;const r=await(await N.sendMessage(n.value.escrowId,K.value)).wait();(r==null?void 0:r.status)===1&&(V.value=await Ue(n.value.escrowId),K.value="")}const H=h(!1),g=h(0),Q=h(""),_e=h(!1);function Je(){n.value&&(H.value=!0,g.value=ye(n.value.price))}async function Le(){if(!n.value)return;if(_e.value=!1,Q.value.length<5){_e.value=!0;return}const r=await(await S.openCommitteeReview(n.value.escrowId,As(g.value),Q.value)).wait();(r==null?void 0:r.status)===1&&(M(n.value),H.value=!1,Q.value="",T({title:"step 1/2",description:"a committee is opening"}));const $=await Ve(n.value.escrowId),q=await S.getAllAvailableCommitteeMembers(),k=new Set;for(;k.size<$.requiredCommitteeMembers;){const O=Math.floor(Math.random()*q.length);k.add(q[O])}const I=await(await S.setCommitteeMembers(n.value.escrowId,Array.from(k))).wait();(I==null?void 0:I.status)===1&&T({title:"step 2/2",description:"committee is setup for you"})}return(i,r)=>{var xe,ke,Ce,$e,Ie,De,Re,Me,Be,Se;const $=us,q=ht,k=qs,E=zs,I=Ms,O=Oe,re=ft,fe=_t,ge=mt,Xe=pt,Ke=dt,he=Ye,Z=Fs,Qe=ut,be=Ne,We=rs,Ge=ls,Ze=cs,es=ps,ss=ds,ts=is,as=ns;return a(),l(D,null,[s("div",yt,[s("div",vt,[s("div",{class:Y(["col-span-1",e(C)?"border rounded-md":"border-none"])},[e(C)?f("",!0):(a(),R($,{key:0,modelValue:e(se),"onUpdate:modelValue":r[0]||(r[0]=u=>ee(se)?se.value=u:null),placeholder:"search for chats"},null,8,["modelValue"])),e(C)?f("",!0):(a(),l("div",wt,[t(q),gt])),t(E,{class:"h-[600px]"},{default:o(()=>[e(A).length?(a(),l("ul",bt,[(a(!0),l(D,null,ae(e(A),u=>{var P;return a(),l("li",{key:u.escrowId,class:"cursor-pointer",onClick:le=>M(u)},[s("div",{class:Y(["border rounded-md px-4 py-3 hover:border-primary transition-colors",{"border-primary":u.escrowId===((P=e(n))==null?void 0:P.escrowId)}])},[s("div",kt,[s("div",Ct,[s("p",$t," #"+p(u.jobId)+" "+p(u.job.title),1),t(k,null,{parent:o(()=>[s("span",It,p(("toETH"in i?i.toETH:e(ye))(u.job.price)),1)]),_:2},1024)]),s("div",Dt,[s("span",null,p(u.sellerUsername),1),s("span",Rt,p(e(Ee)(u.seller)),1)])])],2)],8,xt)}),128))])):f("",!0),e(C)?f("",!0):(a(),l("div",Mt,[t(q),Bt])),e(W).length?(a(),l("ul",St,[(a(!0),l(D,null,ae(e(W),u=>{var P;return a(),l("li",{key:u.escrowId,class:"cursor-pointer",onClick:le=>M(u)},[s("div",{class:Y(["border rounded-md px-4 py-3 hover:border-primary transition-colors",{"border-primary":u.escrowId===((P=e(n))==null?void 0:P.escrowId)}])},[s("div",qt,[s("div",Ft,[s("p",zt," #"+p(u.jobId)+" "+p(u.job.title),1),t(k,null,{parent:o(()=>[s("span",Ut,p(("toETH"in i?i.toETH:e(ye))(u.job.price)),1)]),_:2},1024)]),s("div",Vt,[s("span",null,p(u.buyerUsername),1),s("span",Et,p(e(Ee)(u.buyer)),1)])])],2)],8,At)}),128))])):f("",!0),e(C)?(a(),l("div",jt,Tt)):f("",!0)]),_:1})],2),s("div",Ht,[s("div",Ot,[e(G)==="buyer"?(a(),l(D,{key:0},[t(I,{address:(xe=e(n))==null?void 0:xe.seller,size:35},null,8,["address"]),s("div",Pt,[s("span",Yt,p(((ke=e(n))==null?void 0:ke.sellerUsername)??"n.a."),1),s("span",Jt,p(((Ce=e(n))==null?void 0:Ce.seller)??e(U)),1)])],64)):(a(),l(D,{key:1},[t(I,{address:($e=e(n))==null?void 0:$e.buyer,size:35},null,8,["address"]),s("div",Lt,[s("span",Xt,p(((Ie=e(n))==null?void 0:Ie.buyerUsername)??"n.a."),1),s("span",Kt,p(((De=e(n))==null?void 0:De.buyer)??e(U)),1)])],64)),s("div",Qt,[((Re=e(y))==null?void 0:Re.status)===e(z).Pending&&!e(ie)(((Me=e(X))==null?void 0:Me.requester)??"",e(w).address)?(a(),R(Ke,{key:0},{default:o(()=>[t(re,null,{default:o(()=>[t(O,{variant:"outline",size:"icon",class:"h-8 w-8"},{default:o(()=>[t(e(Ns),{size:20})]),_:1})]),_:1}),t(Xe,{align:"end"},{default:o(()=>[e(G)==="seller"?(a(),l(D,{key:0},[t(fe,{class:"text-highlight pr-4",onClick:r[1]||(r[1]=u=>m(!0))},{default:o(()=>[s("div",Wt,[t(e(Us),{size:24}),Gt])]),_:1}),t(ge),t(fe,{class:"text-destructive pr-4",onClick:r[2]||(r[2]=u=>m(!1))},{default:o(()=>[s("div",Zt,[t(e(Hs),{size:24}),ea])]),_:1}),t(ge)],64)):f("",!0),t(fe,{class:"text-yellow-500 dark:text-yellow-400 pr-4",onClick:Je},{default:o(()=>[s("div",sa,[t(e(Es),{size:24}),ta])]),_:1})]),_:1})]),_:1})):f("",!0)])]),e(C)?(a(),l("div",aa,[t(e(js),{size:100,"stroke-width":"0.75",class:"text-muted-foreground"})])):(a(),R(E,{key:1,class:"grow p-3"},{default:o(()=>{var u,P,le,Ae,qe;return[s("div",oa,[((u=e(y))==null?void 0:u.status)===e(z).Pending&&e(V).length===0?(a(),l("p",na," you both are now connected ")):f("",!0),((P=e(y))==null?void 0:P.status)===e(z).Start?(a(),l(D,{key:1},[e(G)==="buyer"?(a(),l(D,{key:0},[t(Z,null,{default:o(()=>[t(he,null,{default:o(()=>{var F;return[v(p(((F=e(n))==null?void 0:F.sellerUsername)??"n.a."),1)]}),_:1}),v(" hat accepted your job buy request! ")]),_:1}),t(Z,null,{default:o(()=>[v(" click this button to connect with them. ")]),_:1}),t(Z,{"parent-class":""},{default:o(()=>[t(O,{size:"sm",onClick:d},{default:o(()=>[v(" connect ")]),_:1})]),_:1})],64)):(a(),l(D,{key:1},[t(Z,{dir:"right"},{default:o(()=>[v(" you hat already sent job request to "),t(he,null,{default:o(()=>{var F;return[v(p(((F=e(n))==null?void 0:F.buyerUsername)??"n.a."),1)]}),_:1}),v(". ")]),_:1}),t(Z,{dir:"right"},{default:o(()=>[v(" wait for them to accept! ")]),_:1})],64))],64)):f("",!0),(a(!0),l(D,null,ae(e(V),({sender:F,timestamp:Fe,content:os})=>(a(),R(Z,{key:Fe,dir:e(ie)(F,e(w).address)?"right":"left"},{timestamp:o(()=>[s("p",ra,p(("useDateFormat"in i?i.useDateFormat:e(ve))(Fe,"HH:mm DD.MM.YY").value),1)]),default:o(()=>[v(p(os)+" ",1)]),_:2},1032,["dir"]))),128)),((le=e(y))==null?void 0:le.status)===e(z).Accepted&&e(n)?(a(),R(Qe,{key:2,"escrow-id":e(n).escrowId},null,8,["escrow-id"])):f("",!0),((Ae=e(y))==null?void 0:Ae.status)===e(z).Declined?(a(),l("p",la," escrow has been canceled. ")):f("",!0),e(n)&&((qe=e(X))==null?void 0:qe.requester)!==e(U)?(a(),l("p",ca,[v(" a committee has been requested by "),t(he,null,{default:o(()=>{var F;return[v(p((F=e(X))==null?void 0:F.username),1)]}),_:1})])):f("",!0)])]}),_:1})),s("div",ia,[s("form",{class:"flex items-center gap-3",onSubmit:de(ne,["prevent"])},[s("div",ua,[t(be,{class:"min-h-0",model:"newMessage",placeholder:"type something here..."})]),t(O,{size:"icon",disabled:e(C)||((Be=e(y))==null?void 0:Be.status)===e(z).Accepted||((Se=e(y))==null?void 0:Se.status)===e(z).Declined},{default:o(()=>[t(e(Vs),{size:20})]),_:1},8,["disabled"])],32)])])])]),t(as,{open:e(H),"onUpdate:open":r[5]||(r[5]=u=>ee(H)?H.value=u:null)},{default:o(()=>[t(ts,{class:"sm:max-w-[425px]"},{default:o(()=>[t(Ze,null,{default:o(()=>[t(We,null,{default:o(()=>[v("request committee")]),_:1}),t(Ge)]),_:1}),s("form",{class:"space-y-3",onSubmit:de(Le,["prevent"])},[t(ss,{class:"flex items-center gap-3"},{default:o(()=>[da,t(es,{modelValue:e(g),"onUpdate:modelValue":r[3]||(r[3]=u=>ee(g)?g.value=u:null),min:"0",type:"number"},null,8,["modelValue"])]),_:1}),t(be,{modelValue:e(Q),"onUpdate:modelValue":r[4]||(r[4]=u=>ee(Q)?Q.value=u:null),placeholder:"reason why you want to open a committee"},null,8,["modelValue"]),e(_e)?(a(),l("p",pa," reason should have more than 5 characters ")):f("",!0),t(O,{class:"w-full",type:"submit"},{default:o(()=>[v(" request ")]),_:1})],32)]),_:1})]),_:1},8,["open"])],64)}}});export{wa as default};
