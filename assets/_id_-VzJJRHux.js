import{_ as U}from"./ScrollArea.vue_vue_type_script_setup_true_lang-JPoft_zY.js";import{_ as Y}from"./ChatBox.vue_vue_type_script_setup_true_lang-Bj3Xt72b.js";import{c as N,d as J,t as Z,v as G,a5 as V,z as k,a8 as K,ar as O,ab as Q,L as R,aq as W,j as f,D as e,u as s,a as g,w as n,f as c,C as r,J as X,F,E as H,at as ee,aC as se,as as te,_ as ae,au as oe,o as l,B as u,av as ne,ac as ce,H as de,k as w,N as re}from"./index-dGspU4tC.js";import{_ as ie}from"./Badge.vue_vue_type_script_setup_true_lang-avDUSB2l.js";/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=N("MoveLeftIcon",[["path",{d:"M6 8L2 12L6 16",key:"kyvwex"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=N("ThumbsDownIcon",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-vue-next v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=N("ThumbsUpIcon",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),_e={class:"py-10 space-y-6"},pe={class:"space-y-3"},fe={class:"flex items-center justify-between"},he={class:"flex items-center gap-3"},ve=e("span",{class:"text-3xl font-light"},"details",-1),ye={class:"mt-0.5"},ge={key:0,class:"grid grid-cols-12 gap-3"},be={class:"col-span-4"},xe={class:"border rounded-md h-[300px] overflow-auto p-3"},ke={class:"flex flex-col justify-center items-center"},we={class:"mt-2"},Ne={class:"text-muted-foreground text-sm"},Ce={class:"bg-secondary px-3 py-1 rounded-md mt-2"},De={class:"col-span-8"},Me={class:"border rounded-md bg-background"},Le={class:"flex flex-col gap-2 h-full"},qe={class:"text-sm text-muted-foreground text-end pr-3 py-1"},Ae={class:"space-y-3"},ze={class:"pr-5 flex items-center justify-between"},Be=e("span",{class:"text-3xl font-light"},"members",-1),Ve={class:"font-medium"},Re={class:"grid grid-cols-3 gap-3"},Fe={class:"flex items-center gap-6"},He={class:"text-muted-foreground text-sm"},$e={class:"ml-auto flex items-center gap-3"},Pe=J({__name:"[id]",async setup(Te){let h,C;const $=oe(),T=ee(),b=Z(),D=([h,C]=G(()=>b.getCommitteeFactory()),h=await h,C(),h),x=V(()=>+$.params.id),a=k(),v=k([]),I=V(()=>v.value.filter(t=>t.vote).length),M=k();K(async()=>{L(),q()});async function L(){const t=await O(x.value);t.requester===Q&&T.push("/committees");const d=await R(t.requester);a.value={...t,userName:d.userName}}async function q(){const t=await D.getCommitteeVotes(x.value),d=t[0],i=t[1],m=await Promise.all(d.map(_=>R(_)));v.value=d.map((_,p)=>({address:_,userName:m[p].userName,vote:Number(i[p])})),M.value=await W(x.value)}async function A(t){if(!a.value)return;const i=await(await D.voteReviewRequest(a.value.escrowId,t)).wait();(i==null?void 0:i.status)===1&&(q(),L())}return(t,d)=>{var z,B;const i=ie,m=re,_=se("RouterLink"),p=te,S=ae,j=Y,E=U;return l(),f("div",_e,[e("div",pe,[e("div",fe,[e("div",he,[ve,e("div",ye,[((z=s(a))==null?void 0:z.status)===0?(l(),g(i,{key:0,class:"bg-yellow-500 dark:bg-yellow-400"},{default:n(()=>[u(" pending ")]),_:1})):((B=s(a))==null?void 0:B.status)===1?(l(),g(i,{key:1,class:"bg-highlight"},{default:n(()=>[u(" accepted ")]),_:1})):(l(),g(i,{key:2,variant:"destructive"},{default:n(()=>[u(" declined ")]),_:1}))])]),c(_,{to:"/committees"},{default:n(()=>[c(m,{size:"sm"},{default:n(()=>[c(s(le),{class:"mr-2"}),u(" Back ")]),_:1})]),_:1})]),s(a)?(l(),f("div",ge,[e("div",be,[e("div",xe,[e("div",ke,[e("div",null,[c(p,{size:60,address:s(a).requester},null,8,["address"])]),e("p",we,r(s(a).userName),1),e("p",Ne,r(s(ne)(s(a).requester)),1),e("div",null,[c(S,null,{default:n(()=>[u(r(s(a).newAmount),1)]),_:1})]),e("p",Ce,r(s(a).reason),1)])])]),e("div",De,[e("div",Me,[c(E,{class:"grow p-3 h-[300px]"},{default:n(()=>[e("div",Le,[(l(!0),f(F,null,H(s(M),({sender:o,timestamp:y,content:P})=>(l(),g(j,{key:y,dir:s(de)(o,s(a).requester)?"left":"right"},{timestamp:n(()=>[e("p",qe,r(("useDateFormat"in t?t.useDateFormat:s(ce))(y,"HH:mm DD.MM.YY").value),1)]),default:n(()=>[u(r(P)+" ",1)]),_:2},1032,["dir"]))),128))])]),_:1})])])])):X("",!0)]),e("div",Ae,[e("div",ze,[Be,e("span",Ve,"voted: "+r(s(I))+" / "+r(s(v).length),1)]),e("ul",Re,[(l(!0),f(F,null,H(s(v),o=>(l(),f("li",{key:o.userName},[e("div",{class:w(["p-3 rounded-md border flex flex-col gap-6",{"border-primary/50":o.vote}])},[e("div",Fe,[e("div",null,[c(p,{address:o.address,size:45},null,8,["address"])]),e("div",null,[e("p",null,r(o.userName),1),e("p",He,r(o.address),1)])]),e("div",$e,[c(m,{variant:"secondary",size:"icon",disabled:o.userName!==s(b).user.userName,class:"disabled:opacity-70",onClick:d[0]||(d[0]=y=>A(!0))},{default:n(()=>[c(s(me),{size:20,"stroke-width":"1.25",class:w({"stroke-highlight":o.vote===2})},null,8,["class"])]),_:2},1032,["disabled"]),c(m,{variant:"secondary",size:"icon",disabled:o.userName!==s(b).user.userName,class:"disabled:opacity-70",onClick:d[1]||(d[1]=y=>A(!1))},{default:n(()=>[c(s(ue),{size:20,"stroke-width":"1.25",class:w({"stroke-destructive":o.vote===1})},null,8,["class"])]),_:2},1032,["disabled"])])],2)]))),128))])])])}}});export{Pe as default};
